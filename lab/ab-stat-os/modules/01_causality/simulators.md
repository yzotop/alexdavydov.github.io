# Симуляторы — Каузальность

Модуль 01 связан с двумя симуляторами. Оба помогают перевести теоретические концепции каузальности в практические решения.

---

## Test Selection Map

**Файл:** `simulators/test_selection_map/index.html`

### Связь с каузальностью

Карта выбора статкритерия начинается с вопроса «какой тип метрики?» — но скрытый первый шаг: *валиден ли эксперимент вообще?*

Используйте симулятор для проверки:

1. **Кластерная рандомизация.** Включите чекбокс «Кластерная рандомизация» — обратите внимание, как появляется предупреждение о малом числе кластеров и допущение «независимость наблюдений» меняет статус. Это прямое следствие нарушения SUTVA на уровне пользователя.

2. **Conditional-метрика.** Выберите тип «Условная (conditional)» — увидите, что допущение «подвыборка не зависит от treatment» помечено как нарушенное. Это визуализация post-treatment conditioning из лекции.

3. **Пресет «Гео-кластерный эксперимент».** Демонстрирует, как переход от user-level к cluster-level рандомизации кардинально меняет рекомендации — от простого t-test к cluster-robust SE.

### Что пробовать

- Сравните пресет «CR, большая выборка» (идеальный случай) с «Гео-кластерный эксперимент» — одна и та же метрика, но другой дизайн → совершенно другие рекомендации.
- Включите «кластерная рандомизация» для любой метрики — посмотрите, как это влияет на допущения и предупреждения.

---

## Cluster Simulator

**Статус:** placeholder (в разработке)

### Планируемая функциональность

Интерактивная демонстрация:

- Как ICC (Intra-Cluster Correlation) влияет на design effect
- Почему эффективный N ≈ число кластеров, а не число пользователей
- Как мощность теста падает при переходе от user-level к cluster-level рандомизации

### Связь с лекцией

Этот симулятор иллюстрирует секцию 5 (Кластерная рандомизация). Числовой пример из лекции (ICC = 0.05, кластер = 1000, design effect ≈ 51) можно будет воспроизвести и изменять параметры, наблюдая влияние на мощность.
