<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uniform Distribution (1–100)</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background-color: #fafafa;
            padding: 3rem 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-size: 1rem;
            font-weight: 400;
            color: #666;
            margin-bottom: 1rem;
            font-style: italic;
        }

        .caption {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 3rem;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s ease;
        }

        .back-link:hover {
            color: #1a1a1a;
        }

        .chart-container {
            margin-top: 3rem;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 2.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
        }

        .axis {
            font-size: 12px;
            fill: #666;
            font-weight: 400;
        }

        .axis .domain {
            display: none;
        }

        .axis .tick line {
            display: none;
        }

        .bar {
            fill: url(#barGradient);
            opacity: 0.85;
            transition: opacity 0.3s ease;
            cursor: pointer;
        }

        .bar:hover {
            opacity: 1;
        }

        .grid-line {
            stroke: #e8e8e8;
            stroke-width: 1;
            stroke-dasharray: 2,2;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">← Back to Distributions</a>
        <h1>Uniform Distribution (1–100)</h1>
        <p class="subtitle">Mathematics without memory. Only the geometry of how mass is distributed.</p>
        <p class="caption">A normal distribution over states {1…100}. No history. No causality. Only shape.</p>

        <div class="chart-container">
            <svg id="chart"></svg>
        </div>
    </div>

    <script>
        // Generate normal distribution over states 1-100
        // Using Box-Muller transform for normal distribution
        function normalRandom(mean, stdDev) {
            let u = 0, v = 0;
            while(u === 0) u = Math.random();
            while(v === 0) v = Math.random();
            const z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
            return z * stdDev + mean;
        }

        // Generate 1000 samples from normal distribution centered at 50
        const mean = 50;
        const stdDev = 15;
        const samples = [];
        for (let i = 0; i < 1000; i++) {
            let value = Math.round(normalRandom(mean, stdDev));
            // Clamp to range [1, 100]
            value = Math.max(1, Math.min(100, value));
            samples.push(value);
        }

        // Set up dimensions
        const margin = { top: 50, right: 40, bottom: 60, left: 40 };
        const width = 800 - margin.left - margin.right;
        const height = 450 - margin.top - margin.bottom;

        // Create SVG
        const svg = d3.select("#chart")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom);

        const g = svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // Create gradient definition
        const defs = svg.append("defs");
        const gradient = defs.append("linearGradient")
            .attr("id", "barGradient")
            .attr("x1", "0%")
            .attr("y1", "0%")
            .attr("x2", "0%")
            .attr("y2", "100%");

        gradient.append("stop")
            .attr("offset", "0%")
            .attr("stop-color", "#4a90e2")
            .attr("stop-opacity", 1);

        gradient.append("stop")
            .attr("offset", "100%")
            .attr("stop-color", "#2f3e4e")
            .attr("stop-opacity", 1);

        // Create histogram with 25 bins for smoother visualization
        const histogram = d3.histogram()
            .domain([1, 100])
            .thresholds(25)
            .value(d => d);

        const bins = histogram(samples);

        // Set up scales
        const xScale = d3.scaleLinear()
            .domain([1, 100])
            .range([0, width]);

        const yScale = d3.scaleLinear()
            .domain([0, d3.max(bins, d => d.length)])
            .nice()
            .range([height, 0]);

        // Add subtle grid lines
        const yAxisGrid = d3.axisLeft(yScale)
            .ticks(5)
            .tickSize(-width)
            .tickFormat("");

        g.append("g")
            .attr("class", "grid-line")
            .call(yAxisGrid);

        // Create bars with animation
        const bars = g.selectAll(".bar")
            .data(bins)
            .enter()
            .append("rect")
            .attr("class", "bar")
            .attr("x", d => xScale(d.x0))
            .attr("width", d => Math.max(0, xScale(d.x1) - xScale(d.x0) - 1))
            .attr("y", height)
            .attr("height", 0)
            .attr("rx", 2)
            .attr("ry", 2);

        // Animate bars
        bars.transition()
            .duration(800)
            .ease(d3.easeCubicOut)
            .attr("y", d => yScale(d.length))
            .attr("height", d => height - yScale(d.length));

        // Create x-axis with 5 ticks
        const xAxis = d3.axisBottom(xScale)
            .ticks(5)
            .tickSize(0)
            .tickPadding(8);

        g.append("g")
            .attr("class", "axis")
            .attr("transform", `translate(0,${height})`)
            .call(xAxis);
    </script>
</body>
</html>

