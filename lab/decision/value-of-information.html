<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Value of Information</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background-color: #ffffff;
            padding: 3rem 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-size: 1rem;
            font-weight: 400;
            color: #666;
            margin-bottom: 1rem;
            font-style: italic;
        }

        .insight {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 3rem;
        }

        .explanation {
            font-size: 1rem;
            line-height: 1.7;
            color: #2c3e50;
            margin-bottom: 3rem;
            max-width: 700px;
        }

        .chart-container {
            margin: 3rem 0;
            background: #ffffff;
            padding: 2.5rem;
        }

        .axis {
            font-size: 11px;
            fill: #999;
            font-weight: 400;
        }

        .axis .domain {
            display: none;
        }

        .axis .tick line {
            stroke: #e8e8e8;
            stroke-width: 1;
        }

        .line {
            fill: none;
            stroke-width: 2;
        }

        .line-value {
            stroke: #2f3e4e;
        }

        .line-cost {
            stroke: #bbb;
            stroke-dasharray: 4, 4;
            opacity: 0.7;
        }

        .line-label {
            font-size: 10px;
            fill: #666;
            font-weight: 400;
        }

        .reference-line {
            stroke: #ccc;
            stroke-width: 1;
            stroke-dasharray: 2, 2;
            opacity: 0.5;
        }

        .reference-label {
            font-size: 9px;
            fill: #aaa;
            font-weight: 400;
        }

        .axis-label {
            font-size: 11px;
            fill: #999;
            font-weight: 400;
        }

        .interpretation {
            font-size: 1rem;
            line-height: 1.7;
            color: #2c3e50;
            margin: 3rem 0;
            max-width: 700px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 1rem;
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s ease;
        }

        .back-link:hover {
            color: #1a1a1a;
        }

        .footer-note {
            font-size: 0.85rem;
            color: #999;
            font-style: italic;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="./index.html" class="back-link">← Back to Decision</a>
        <h1>Value of Information</h1>
        <p class="subtitle">Pay now. Decide better later.</p>
        <p class="insight">Information is an asset when uncertainty is structural.</p>

        <p class="explanation">
            The value of information is the expected improvement from reducing uncertainty before committing to a decision. It measures how much better choices become when we wait to learn.
        </p>

        <p class="explanation">
            The value depends on how irreversible the decision is and how quickly uncertainty resolves. When commitments are costly to undo, information becomes more valuable. When uncertainty persists, waiting longer may not help.
        </p>

        <div class="chart-container">
            <svg id="chart"></svg>
        </div>

        <p class="interpretation">
            Good decisions buy information when it is still cheap. When learning saturates, optimizing harder becomes waste.
        </p>

        <div>
            <a href="./index.html" class="back-link">← Back to Decision</a>
            <p class="footer-note">Decision under uncertainty.</p>
        </div>
    </div>

    <script>
        // Parameters
        const k = 3.2; // saturation rate for value
        const c1 = 0.25; // linear cost coefficient
        const c2 = 0.15; // quadratic cost coefficient
        const nPoints = 201;

        // Generate functions
        function value(x) {
            return 1 - Math.exp(-k * x);
        }

        function cost(x) {
            return c1 * x + c2 * x * x;
        }

        function net(x) {
            return value(x) - cost(x);
        }

        // Generate data
        const valueData = [];
        const costData = [];
        let maxNet = -Infinity;
        let optimalX = 0;

        for (let i = 0; i <= nPoints; i++) {
            const x = i / nPoints;
            const v = value(x);
            const c = cost(x);
            const n = net(x);
            
            valueData.push({ x, y: v });
            costData.push({ x, y: c });
            
            if (n > maxNet) {
                maxNet = n;
                optimalX = x;
            }
        }

        // Set up dimensions
        const margin = { top: 40, right: 60, bottom: 50, left: 50 };
        const width = 800 - margin.left - margin.right;
        const height = 360 - margin.top - margin.bottom;

        // Create SVG
        const svg = d3.select("#chart")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom);

        const g = svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // Scales
        const xScale = d3.scaleLinear()
            .domain([0, 1])
            .range([0, width]);

        const yScale = d3.scaleLinear()
            .domain([0, 1])
            .range([height, 0]);

        // Line generators
        const line = d3.line()
            .x(d => xScale(d.x))
            .y(d => yScale(d.y))
            .curve(d3.curveMonotoneX);

        // Draw reference line at optimum
        const optimalXPos = xScale(optimalX);
        g.append("line")
            .attr("class", "reference-line")
            .attr("x1", optimalXPos)
            .attr("x2", optimalXPos)
            .attr("y1", 0)
            .attr("y2", height);

        g.append("text")
            .attr("class", "reference-label")
            .attr("x", optimalXPos)
            .attr("y", height + 8)
            .attr("text-anchor", "middle")
            .text("optimum");

        // Draw value line (solid, dark)
        g.append("path")
            .datum(valueData)
            .attr("class", "line line-value")
            .attr("d", line);

        // Draw cost line (dashed, light)
        g.append("path")
            .datum(costData)
            .attr("class", "line line-cost")
            .attr("d", line);

        // Add labels near the right end
        const lastX = 1;
        const labelX = xScale(lastX) - 5;
        const lastValue = valueData[valueData.length - 1].y;
        const lastCost = costData[costData.length - 1].y;
        
        // Offset labels to avoid overlap
        g.append("text")
            .attr("class", "line-label")
            .attr("x", labelX)
            .attr("y", yScale(lastValue) - 5)
            .attr("text-anchor", "end")
            .text("value");

        g.append("text")
            .attr("class", "line-label")
            .attr("x", labelX)
            .attr("y", yScale(lastCost) + 5)
            .attr("text-anchor", "end")
            .text("cost");

        // X-axis
        const xAxis = d3.axisBottom(xScale)
            .ticks(3)
            .tickValues([0, 0.5, 1])
            .tickSize(4)
            .tickPadding(8);

        g.append("g")
            .attr("class", "axis")
            .attr("transform", `translate(0,${height})`)
            .call(xAxis);

        // Y-axis
        const yAxis = d3.axisLeft(yScale)
            .ticks(3)
            .tickValues([0, 0.5, 1])
            .tickSize(4)
            .tickPadding(8);

        g.append("g")
            .attr("class", "axis")
            .call(yAxis);

        // Axis labels
        g.append("text")
            .attr("class", "axis-label")
            .attr("x", width / 2)
            .attr("y", height + 35)
            .attr("text-anchor", "middle")
            .text("information gathered");

        g.append("text")
            .attr("class", "axis-label")
            .attr("x", -height / 2)
            .attr("y", -35)
            .attr("text-anchor", "middle")
            .attr("transform", "rotate(-90)")
            .text("normalized scale");
    </script>
</body>
</html>

