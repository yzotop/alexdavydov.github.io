# STYLE_GUIDE_CURSOR.md
Версия: 0.1 (living doc)

Цель: чтобы Cursor генерировал страницы, графики и калькуляторы в одном стиле — чисто, светло, канонично, без визуального шума.

## 0. Главный принцип
Сначала смысл → потом форма.  
На странице всегда должно быть понятно:
1) что моделируется  
2) где «сейчас»  
3) что будет при изменении параметров  
4) почему получился такой эффект

## 1. Канонический визуальный стиль
- Фон страницы: белый (#ffffff) или очень светло-серый (#f7f7f8)
- Карточки: белые, рамка #e6e6e8, border-radius 12–14px
- Много воздуха, отступы 20–24px
- Никаких тёмных тем

## 2. Цвета и семантика
- Зелёный — рост / положительный вклад
- Красный — падение / отрицательный вклад
- Серый — нейтральные элементы
Цвет используется только как носитель смысла, не как украшение.

## 3. Типографика
- H1 — крупный, жирный
- Подзаголовок — серый, поясняющий
- Главная метрика — самая крупная на странице
- «Детали расчёта» — вторичны, могут быть свернуты

## 4. Графики
Использовать D3.js, если график:
- интерактивный
- реагирует на ползунки
- показывает несколько сценариев
- имеет точки current / 100%
- имеет вклад факторов

Оси и сетка — тонкие, ненавязчивые.  
Легенды заменять подписями рядом с линиями/барами.

## 5. Канонические паттерны калькуляторов
Две колонки:
Слева — параметры с базовыми значениями  
Справа — результат и интерпретация

Всегда:
- текущая выручка
- Δ к базе
- короткий текст «что происходит»

## 6. Денежная воронка
Использовать только:
- Requests
- Fill rate = responses / requests
- Show rate = monet_shows / responses
- CPM

CTR и клики не использовать, если они не участвуют в расчёте выручки.

## 7. Контроль vs тест
Отдельная карточка:
- вклад каждого шага в ₽
- зелёный / красный цвет
- строка «Итого»
- одна фраза-инсайт (почему итог такой)

## 8. Sanity-checks
Обязательно:
- база = база → Δ = 0
- падение Fill / Show → падение выручки
- рост CPM → рост выручки
- никаких NaN / Infinity
- проценты в диапазоне 0–100

## 9. Приватность
Реальные тесты и цифры не использовать в main.
Каталог `real_tests/` допустим только в ветке `real-tests`.

## 10. Done-definition
Страница готова, если:
- результат читается за 1 секунду
- график понятен без объяснений
- крайние значения не ломают расчёт
- есть короткий текст-интерпретация

## 11. Term links (глоссарий)

---
### Term links (ссылки на термины глоссария)

Термины аналитики (CPM, Revenue, Fill rate, Show rate и т.д.) оформляются
как inline-ссылки на глоссарий с классом `term-link`.**Принцип:**
термин должен читаться как обычный текст и не привлекать внимание
до взаимодействия пользователя.**Правила оформления:**
- В обычном состоянии:
  - без фона
  - без padding
  - без рамок
  - без подчёркивания
- Цвет допускается слегка отличающийся от основного текста
- Визуальный эффект (подсветка, фон, скругление) появляется
  ТОЛЬКО при наведении (hover)**Запрещено:**
- делать термин постоянной плашкой или бейджем
- использовать фон или padding в обычном состоянии
- визуально выделять термин сильнее, чем основной текст**Цель:**
термин не должен мешать чтению.
Он служит подсказкой, а не элементом интерфейса.

---

## 12. Decision block (канонический компонент)

---
### Decision block (канонический компонент)Decision-блок — это финальный смысловой элемент страницы.
Он отвечает на вопрос: **«Что мы делаем с этим знанием?»**

#### Назначение
- связать график / расчёт с управленческим решением
- предотвратить неверные интерпретации
- зафиксировать логику действия, а не вывод «по ощущению»

#### Структура (СТРОГО ФИКСИРОВАННАЯ)

Decision-блок всегда состоит из 5 секций
и идёт именно в этом порядке:1. **Решение**  
   Короткий заголовок блока.  
   Не содержит выводов — только обозначает, что ниже именно решение.2. **Наблюдение**  
   Что мы видим в данных или на графике.  
   Факты без интерпретации.

3. **Механизм**  
   Почему это происходит.  
   Причинно-следственная связь, формула, логика системы.

4. **Неправильный вывод**  
   Типичная ошибка интерпретации.  
   Формулируется так, как её реально произносят в командах.

5. **Корректная интерпретация / Решение**  
   Что именно нужно делать (или не делать).  
   Проверяемое, ограниченное, привязанное к метрикам действие.

#### Правила оформления

- Язык — русский
- Тон — спокойный, аналитический, без морализаторства
- Без эмодзи внутри текста (допустимы только в заголовках секций)
- Без цветных алертов (warning / success / danger)
- Блок визуально отделён от основного контента
- Внутри используются `term-link` для терминов (CPM, Revenue и т.д.)

#### Запрещено

- менять порядок секций
- объединять секции
- убирать блок «Неправильный вывод»
- превращать Decision-блок в summary или conclusion
- дублировать определения из глоссария

#### Принцип

Если пользователь пролистал страницу
и прочитал ТОЛЬКО Decision-блок —
он должен понять:
- что произошло
- почему
- и какое решение корректно

---